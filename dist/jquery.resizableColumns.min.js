/* jQuery Resizable Columns v0.1.0 | https://github.com/woolyninja/jquery-resizable-columns | Licensed MIT | Built Fri Feb 20 2015 11:46:32 */
/* Forked from original project @ http://dobtco.github.io/jquery-resizable-columns/ */
var __bind=function(a,b){return function(){return a.apply(b,arguments)}},__slice=[].slice;!function(a,b){var c,d,e,f;return d=function(a){return parseFloat(a.style.width.replace("%",""))},f=function(a,b){return b=b.toFixed(2),a.style.width=""+b+"%"},e=function(a){return 0===a.type.indexOf("touch")?(a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]).pageX:a.pageX},c=function(){function c(c,d){this.pointerdown=__bind(this.pointerdown,this),this.constrainWidth=__bind(this.constrainWidth,this),this.options=a.extend({},this.defaults,d),this.$table=c,this.lastDraggableHeaderIndex=999,this.setHeaders(),this.restoreColumnWidths(),this.syncHandleWidths(),a(b).on("resize.rc",function(a){return function(){return a.syncHandleWidths()}}(this)),this.options.start&&this.$table.bind("column:resize:start.rc",this.options.start),this.options.resize&&this.$table.bind("column:resize.rc",this.options.resize),this.options.stop&&this.$table.bind("column:resize:stop.rc",this.options.stop)}return c.prototype.defaults={selector:"thead tr:eq(0) th:visible",noResizeAttr:"data-noresize",store:b.store,syncHandlers:!0,resizeFromBody:!0,maxWidth:null,minWidth:null,obeyCssMinWidth:!1,obeyCssMaxWidth:!1},c.prototype.triggerEvent=function(b,c,d){var e;return e=a.Event(b),e.originalEvent=a.extend({},d),this.$table.trigger(e,[this].concat(c||[]))},c.prototype.getColumnId=function(a){return this.$table.data("resizable-columns-id")+"-"+a.data("resizable-column-id")},c.prototype.setHeaders=function(){return this.$tableHeaders=this.$table.find(this.options.selector),this.assignPercentageWidths(),this.createHandles()},c.prototype.destroy=function(){return this.$handleContainer.remove(),this.$table.removeData("resizableColumns"),this.$table.add(b).off(".rc")},c.prototype.assignPercentageWidths=function(){return this.$tableHeaders.each(function(b){return function(c,d){var e,g,h,i;return e=a(d),"true"!==e.attr(b.options.noResizeAttr)?(i=e.outerWidth()/b.$table.width()*100,e.data("cssMinWidth",0),e.data("cssMaxWidth",100),h=b.calcCssMinWidth(e),null!=h&&(i=Math.max(h,i)),g=b.calcCssMinWidth(e),null!=g&&(i=Math.min(g,i)),f(e[0],i)):void 0}}(this))},c.prototype.calcCssMinWidth=function(a){var b,c;return c=null,b=a[0],this.options.obeyCssMinWidth&&(c="px"===b.style.minWidth.slice(-2)?parseFloat(b.style.minWidth)/this.$table.width()*100:parseFloat(b.style.minWidth),isNaN(c)?c=null:a.data("cssMinWidth",c)),c},c.prototype.calcCssMaxWidth=function(a){var b,c;return c=null,b=a[0],this.options.obeyCssMaxWidth&&(c="px"===b.style.maxWidth.slice(-2)?parseFloat(b.style.maxWidth)/this.$table.width()*100:parseFloat(b.style.maxWidth),isNaN(c)?c=null:a.data("cssMaxWidth",c)),c},c.prototype.createHandles=function(){var b;return null!=(b=this.$handleContainer)&&b.remove(),this.$table.before(this.$handleContainer=a("<div class='rc-handle-container' />")),this.$tableHeaders.each(function(a){return function(b){return"true"!==a.$tableHeaders.eq(b).attr(a.options.noResizeAttr)?a.lastDraggableHeaderIndex=b:void 0}}(this)),this.$tableHeaders.each(function(b){return function(c,d){var e;if(c!==b.lastDraggableHeaderIndex&&0!==b.$tableHeaders.eq(c+1).length&&"true"!==b.$tableHeaders.eq(c).attr(b.options.noResizeAttr))return e=a("<div class='rc-handle' />"),e.data("th",a(d)),e.appendTo(b.$handleContainer)}}(this)),this.$handleContainer.on("mousedown touchstart",".rc-handle",this.pointerdown)},c.prototype.syncHandleWidths=function(){return this.$handleContainer.width(this.$table.width()).find(".rc-handle").each(function(b){return function(c,d){var e,f;return e=a(d),f=b.$tableHeaders.filter(":not(["+b.options.noResizeAttr+"=true])").eq(c),e.css({left:f.outerWidth()+(f.offset().left-b.$handleContainer.offset().left),height:b.options.resizeFromBody?b.$table.height():b.$table.find("thead").height()})}}(this))},c.prototype.saveColumnWidths=function(){return this.$tableHeaders.each(function(b){return function(c,e){var f;return f=a(e),"true"!==f.attr(b.options.noResizeAttr)&&null!=b.options.store?b.options.store.set(b.getColumnId(f),d(f[0])):void 0}}(this))},c.prototype.restoreColumnWidths=function(){return this.$tableHeaders.each(function(b){return function(c,d){var e,g;return e=a(d),null!=b.options.store&&(g=b.options.store.get(b.getColumnId(e)))?f(e[0],g):void 0}}(this))},c.prototype.totalColumnWidths=function(){var b;return b=0,this.$tableHeaders.each(function(){return function(c,d){return b+=parseFloat(a(d)[0].style.width.replace("%",""))}}(this)),b},c.prototype.constrainWidth=function(a,b){return(null!=this.options.minWidth||this.options.obeyCssMinWidth)&&(b=Math.max(a.data("cssMinWidth"),this.options.minWidth,b)),(null!=this.options.maxWidth||this.options.obeyCssMaxWidth)&&(b=Math.min(a.data("cssMaxWidth"),this.options.maxWidth,b)),b=Math.max(0,b),b=Math.min(100,b)},c.prototype.pointerdown=function(b){var c,g,h,i,j,k,l,m;return b.preventDefault(),h=a(b.currentTarget.ownerDocument),l=e(b),c=a(b.currentTarget),j=c.index(),g=this.$tableHeaders.filter(":not(["+this.options.noResizeAttr+"=true])").eq(j),i=this.$tableHeaders.filter(":not(["+this.options.noResizeAttr+"=true])").eq(j+1),m={left:d(g[0]),right:d(i[0])},k={left:m.left,right:m.right},this.$handleContainer.add(this.$table).addClass("rc-table-resizing"),g.add(i).add(c).addClass("rc-column-resizing"),this.triggerEvent("column:resize:start",[g,i,k.left,k.right],b),h.on("mousemove.rc touchmove.rc",function(a){return function(b){var c;return c=(e(b)-l)/a.$table.width()*100,c>0&&(f(i[0],k.right=a.constrainWidth(i,m.right-c)),f(g[0],k.left=a.constrainWidth(g,m.left+(m.right-k.right)))),0>c&&(f(g[0],k.left=a.constrainWidth(g,m.left+c)),f(i[0],k.right=a.constrainWidth(i,m.right+(m.left-k.left)))),null!=a.options.syncHandlers&&a.syncHandleWidths(),a.triggerEvent("column:resize",[g,i,k.left,k.right],b)}}(this)),h.one("mouseup touchend",function(a){return function(){return h.off("mousemove.rc touchmove.rc"),a.$handleContainer.add(a.$table).removeClass("rc-table-resizing"),g.add(i).add(c).removeClass("rc-column-resizing"),a.syncHandleWidths(),a.saveColumnWidths(),a.triggerEvent("column:resize:stop",[g,i,k.left,k.right],b)}}(this))},c}(),a.fn.extend({resizableColumns:function(){var b,d;return d=arguments[0],b=2<=arguments.length?__slice.call(arguments,1):[],this.each(function(){var e,f;return e=a(this),f=e.data("resizableColumns"),f||e.data("resizableColumns",f=new c(e,d)),"string"==typeof d?f[d].apply(f,b):void 0})}})}(window.jQuery,window);